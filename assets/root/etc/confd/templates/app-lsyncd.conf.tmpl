settings {
	statusFile = "/tmp/backup.lsyncd.stat",
	logfile = "/tmp/lsyncd.log",
        nodaemon = true,
	statusInterval = 1,
}

sync {
    default.rsync,
    source    = {{getenv "LSYNCD_SYNC_SOURCE" (getv "/lsyncd/sync/source" "/project")},
    target    = {{getenv "LSYNCD_SYNC_TARGET" (getv "/lsyncd/sync/target" "/Workspace")},
    delay     = 1,
}

bash = {
    delay = 5,
    maxProcesses = 3,
    onCreate = "cp -r ^sourcePathname ^targetPathname",
    onModify = "cp -r ^sourcePathname ^targetPathname",
    onDelete = "rm -rf ^targetPathname",
    onStartup = '[[ if [ "$(ls -A ^source)" ]; then cp -r ^source* ^target; fi]]',
}
